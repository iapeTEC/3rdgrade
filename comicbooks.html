<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Comic Book Development Activity, 3rd Year of High School</title>
  <style>
    :root {
      --bg: #0f172a;         /* slate-900 */
      --card: #111827;       /* gray-900 */
      --muted: #94a3b8;      /* slate-400 */
      --text: #e5e7eb;       /* gray-200 */
      --accent: #38bdf8;     /* sky-400 */
      --radius: 16px;
      --gap: 14px;
      --shadow: 0 8px 30px rgba(0,0,0,.35);
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, "Helvetica Neue", Arial, "Apple Color Emoji","Segoe UI Emoji";
      color: var(--text);
      background: radial-gradient(1200px 800px at 10% -10%, rgba(56,189,248,.08), transparent 60%),
                  radial-gradient(900px 600px at 90% -20%, rgba(14,165,233,.06), transparent 50%),
                  var(--bg);
      min-height: 100dvh;
      display: flex;
      flex-direction: column;
    }
    header {
      padding: 32px 18px 10px;
      text-align: center;
    }
    header h1 {
      margin: 0;
      font-weight: 800;
      letter-spacing: .2px;
      line-height: 1.2;
      font-size: clamp(1.25rem, 1rem + 1.6vw, 2rem);
    }
    header p {
      margin: 8px 0 2px;
      color: var(--muted);
      font-size: .95rem;
    }
    .wrap {
      width: min(1200px, 92vw);
      margin: 20px auto 60px;
    }
    /* Galeria */
    .gallery {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
      gap: var(--gap);
    }
    figure {
      margin: 0;
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
      border: 1px solid rgba(255,255,255,.09);
      border-radius: var(--radius);
      overflow: hidden;
      box-shadow: var(--shadow);
      transition: transform .18s ease, box-shadow .18s ease;
      cursor: zoom-in;
    }
    figure:hover { transform: translateY(-2px); }
    .thumb {
      width: 100%;
      display: block;
      aspect-ratio: 3/4;
      object-fit: cover;
      background: #0b1220;
    }
    figcaption {
      padding: 10px 12px 12px;
      font-size: .95rem;
      color: #e2e8f0;
      border-top: 1px solid rgba(255,255,255,.06);
    }

    /* Lightbox */
    .lightbox {
      position: fixed;
      inset: 0;
      background: rgba(5,10,25,.8);
      backdrop-filter: blur(2px);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 1000;
      padding: 24px;
    }
    .lightbox.open { display: flex; }
    .lb-content {
      position: relative;
      max-width: 92vw;
      max-height: 90vh;
    }
    .lb-img {
      max-width: 92vw;
      max-height: 76vh;
      width: auto;
      height: auto;
      display: block;
      border-radius: 12px;
      box-shadow: var(--shadow);
      background: #0b1220;
    }
    .lb-caption {
      margin-top: 10px;
      text-align: center;
      color: #e5e7eb;
      font-size: 1rem;
    }
    .lb-btn {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background: rgba(15,23,42,.6);
      border: 1px solid rgba(255,255,255,.15);
      color: #fff;
      width: 42px; height: 42px;
      border-radius: 999px;
      display: grid; place-items: center;
      cursor: pointer;
      user-select: none;
      font-size: 24px;
    }
    .lb-prev { left: -56px; }
    .lb-next { right: -56px; }
    @media (max-width: 700px) {
      .lb-prev { left: -8px; top: calc(50% - 80px); }
      .lb-next { right: -8px; top: calc(50% - 80px); }
    }
    .lb-close {
      position: absolute;
      top: -14px; right: -14px;
      width: 38px; height: 38px;
      border-radius: 999px;
      background: rgba(15,23,42,.8);
      border: 1px solid rgba(255,255,255,.15);
      color: #fff;
      display: grid; place-items: center;
      cursor: pointer;
      font-size: 20px;
    }
    footer {
      margin: 24px 0 40px;
      text-align: center;
      color: var(--muted);
      font-size: .9rem;
    }
    a { color: var(--accent); text-decoration: none; }
    a:hover { text-decoration: underline; }
  </style>
</head>
<body>
  <header>
    <h1>Comic Book Development Activity, 3rd Year of High School.</h1>
    <p>Click an image to view it larger.</p>
  </header>

  <main class="wrap">
    <div id="gallery" class="gallery" aria-live="polite"></div>
  </main>

  <div id="lightbox" class="lightbox" aria-hidden="true">
    <div class="lb-content">
      <img id="lbImg" class="lb-img" alt="">
      <div id="lbCaption" class="lb-caption"></div>
      <button class="lb-btn lb-prev" id="lbPrev" aria-label="Previous image">‹</button>
      <button class="lb-btn lb-next" id="lbNext" aria-label="Next image">›</button>
      <button class="lb-close" id="lbClose" aria-label="Close">✕</button>
    </div>
  </div>

  <footer>
    Add new files named <strong>1.jpg</strong> … <strong>40.jpg</strong> alongside this HTML and refresh the page.
  </footer>

  <script>
    // ==== PERSONALIZAÇÃO RÁPIDA ====
    const MAX_IMAGES = 40;    // Quantas imagens no máximo procurar
    const EXT = 'jpg';        // Extensão
    const PATH_PREFIX = '';   // '' = mesma pasta | 'images/' se usar subpasta
    // Títulos por imagem (opcional). Remova/edite linhas para títulos customizados.
    const titles = {
      // 1: 'Capa',
      // 2: 'Rascunho da Personagem',
      // ...
    };
    // Título padrão se não houver no objeto 'titles'
    const defaultTitle = (i) => `Image ${i}`;

    // ==== LÓGICA ====
    const gallery = document.getElementById('gallery');
    const lightbox = document.getElementById('lightbox');
    const lbImg = document.getElementById('lbImg');
    const lbCaption = document.getElementById('lbCaption');
    const lbPrev = document.getElementById('lbPrev');
    const lbNext = document.getElementById('lbNext');
    const lbClose = document.getElementById('lbClose');

    let available = [];   // índices que realmente existem
    let currentIdx = -1;  // posição dentro de 'available' (não o número do arquivo)

    // Tenta carregar imagens 1.jpg ... MAX_IMAGES.jpg
    function tryLoad(i) {
      return new Promise((resolve) => {
        const src = `${PATH_PREFIX}${i}.${EXT}`;
        const test = new Image();
        test.onload = () => resolve({ ok: true, i, src, w: test.naturalWidth, h: test.naturalHeight });
        test.onerror = () => resolve({ ok: false, i, src });
        test.src = src + `?v=${Date.now()}`; // bust cache leve
      });
    }

    function addThumb({ i, src }) {
      const fig = document.createElement('figure');
      fig.dataset.index = String(i);

      const img = document.createElement('img');
      img.className = 'thumb';
      img.loading = 'lazy';
      img.src = src;
      img.alt = `Comic image ${i}`;

      const cap = document.createElement('figcaption');
      cap.textContent = titles[i] || defaultTitle(i);

      fig.appendChild(img);
      fig.appendChild(cap);
      fig.addEventListener('click', () => openLightbox(i));
      gallery.appendChild(fig);
    }

    async function boot() {
      const checks = [];
      for (let i = 1; i <= MAX_IMAGES; i++) checks.push(tryLoad(i));
      const results = await Promise.all(checks);
      results
        .filter(r => r.ok)
        .sort((a, b) => a.i - b.i)
        .forEach(r => {
          available.push(r.i);
          addThumb(r);
        });
    }

    function openLightbox(fileNumber) {
      const pos = available.indexOf(fileNumber);
      if (pos === -1) return;
      currentIdx = pos;
      updateLightbox();
      lightbox.classList.add('open');
      lightbox.setAttribute('aria-hidden', 'false');
      document.body.style.overflow = 'hidden';
    }

    function updateLightbox() {
      const fileNumber = available[currentIdx];
      const src = `${PATH_PREFIX}${fileNumber}.${EXT}`;
      lbImg.src = src;
      lbImg.alt = `Comic image ${fileNumber}`;
      lbCaption.textContent = titles[fileNumber] || defaultTitle(fileNumber);
    }

    function closeLightbox() {
      lightbox.classList.remove('open');
      lightbox.setAttribute('aria-hidden', 'true');
      document.body.style.overflow = '';
      lbImg.src = '';
    }

    function prevImg() {
      if (available.length === 0) return;
      currentIdx = (currentIdx - 1 + available.length) % available.length;
      updateLightbox();
    }
    function nextImg() {
      if (available.length === 0) return;
      currentIdx = (currentIdx + 1) % available.length;
      updateLightbox();
    }

    // Controles
    lbClose.addEventListener('click', closeLightbox);
    lbPrev.addEventListener('click', prevImg);
    lbNext.addEventListener('click', nextImg);
    lightbox.addEventListener('click', (e) => {
      if (e.target === lightbox) closeLightbox();
    });
    window.addEventListener('keydown', (e) => {
      if (!lightbox.classList.contains('open')) return;
      if (e.key === 'Escape') closeLightbox();
      if (e.key === 'ArrowLeft') prevImg();
      if (e.key === 'ArrowRight') nextImg();
    });

    // Inicia
    boot();
  </script>
</body>
</html>
